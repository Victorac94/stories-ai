<div class="container" #container>
    <div class="container-filter" id="container-filter">
        <div class="wrapper" *ngIf="story">
            <!-- Title -->
            <div class="title-container">
                <h2 id="story-title">{{story.title}}</h2>
            </div>

            <!-- Main image -->
            <div [ngClass]="{'main-media-container': true, 'hero-loaded': isMainImageLoaded}"
                [appImagePlaceholder]="{isHeroImageLoaded: isMainImageLoaded}">
                <img class="media-desktop" (load)="onMainImageLoad($event)" [src]="story.rootStory.image_desktop">
                <img class="media-mobile" (load)="onMainImageLoad($event)" [src]="story.rootStory.image_mobile">
                <!-- <video class="media-desktop" autoplay loop disableRemotePlayback
                    [poster]="story.rootStory.image_desktop" #mainMediaDesktop>
                    <source [src]="story.rootStory.video_desktop" type="video/mp4">
                    Tu navegador no soporta la etiqueta &lt;video&gt;
                </video>
                <video class="media-mobile" autoplay loop disableRemotePlayback [poster]="story.rootStory.image_mobile"
                    #mainMediaMobile>
                    <source [src]="story.rootStory.video_mobile" type="video/mp4">
                    Tu navegador no soporta la etiqueta &lt;video&gt;
                </video> -->
            </div>

            <!-- Intro -->
            <p class="intro" appRevealText>{{story.rootStory.text}}</p>

            <!-- Choose story option -->
            <app-choose-option [chooseOption]="'primary'" [optionA]="story.rootStory.optionA"
                [optionB]="story.rootStory.optionB" (optionSelected)="onSelectOption($event)"></app-choose-option>

            <!-- Selected option -->
            <div class="selected-option" *ngIf="isPrimaryChooseOptionSelected">
                <video class="media-desktop" autoplay loop disableRemotePlayback
                    [poster]="selectedPrimaryChooseOption.image_desktop" #primaryOptionMediaDesktop>
                    <source [src]="selectedPrimaryChooseOption.video_desktop" type="video/mp4">
                    Tu navegador no soporta la etiqueta &lt;video&gt;
                </video>
                <video class="media-mobile" autoplay loop disableRemotePlayback
                    [poster]="selectedPrimaryChooseOption.image_mobile" #primaryOptionMediaMobile>
                    <source [src]="selectedPrimaryChooseOption.video_mobile" type="video/mp4">
                    Tu navegador no soporta la etiqueta &lt;video&gt;
                </video>
                <!-- <img class="image-desktop" [src]="selectedPrimaryChooseOption.image_desktop"
                    [alt]="selectedPrimaryChooseOption.optionText">
                <img class="image-mobile" [src]="selectedPrimaryChooseOption.image_mobile"
                    [alt]="selectedPrimaryChooseOption.optionText"> -->
                <p appRevealText>{{selectedPrimaryChooseOption.text}}</p>
            </div>

            <!-- Choose story option -->
            <app-choose-option *ngIf="isPrimaryChooseOptionSelected" [chooseOption]="'secondary'"
                [optionA]="selectedPrimaryChooseOption.optionA" [optionB]="selectedPrimaryChooseOption.optionB"
                (optionSelected)="onSelectOption($event)"></app-choose-option>

            <!-- Selected option -->
            <div class="selected-option" *ngIf="isSecondaryChooseOptionSelected">
                <video class="media-desktop" autoplay loop disableRemotePlayback
                    [poster]="selectedSecondaryChooseOption.image_desktop" #secondaryOptionMediaDesktop>
                    <source [src]="selectedSecondaryChooseOption.video_desktop" type="video/mp4">
                    Tu navegador no soporta la etiqueta &lt;video&gt;
                </video>
                <video class="media-mobile" autoplay loop disableRemotePlayback
                    [poster]="selectedSecondaryChooseOption.image_mobile" #secondaryOptionMediaMobile>
                    <source [src]="selectedSecondaryChooseOption.video_mobile" type="video/mp4">
                    Tu navegador no soporta la etiqueta &lt;video&gt;
                </video>
                <!-- <img class="image-desktop" [src]="selectedSecondaryChooseOption.image_desktop"
                    [alt]="selectedSecondaryChooseOption.optionText">
                <img class="image-mobile" [src]="selectedSecondaryChooseOption.image_mobile"
                    [alt]="selectedSecondaryChooseOption.optionText"> -->
                <p appRevealText>{{selectedSecondaryChooseOption.text}}</p>
            </div>

            <!-- Footer -->
            <div class="footer">
                <p *ngIf="isSecondaryChooseOptionSelected">FIN</p>
                <button (click)="restartStory()">Volver a empezar</button>
                <button [routerLink]="['/', 'home']" fragment="genres">GÃ©neros</button>
                <button [routerLink]="['/', 'genres', story.genre]">{{story.genre_es | capitalize}}</button>
            </div>
        </div>
    </div>
</div>